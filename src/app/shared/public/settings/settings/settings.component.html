<div class="grid h-full">
  <!-- Account Information Card -->
  <div class="col-12 lg:col-6 flex flex-column">
    <p-card
      header="Account Information"
      styleClass="flex-full shadow-3 d-flex flex-column h-100"
    >
      <form [formGroup]="userForm" class="flex flex-column gap-3 flex-grow-1">
        <div class="field flex flex-column align-items-center">
          <p-avatar
            [image]="this.profilePicture"
            size="xlarge"
            shape="circle"
            [style]="{ width: '150px', height: '150px' }"
          ></p-avatar>
          <p-fileUpload
          #fu
            mode="basic"
            chooseLabel="Change Profile Picture"
            name="profilePicture"
            (onSelect)="onProfilePictureSelect($event)"
            chooseIcon="pi pi-upload"
            styleClass="mt-2"
            maxFileSize="5000000"
            auto
          ></p-fileUpload>
        </div>
        <div class="field">
          <label for="username" class="block font-bold mb-2">Username</label>
          <span class="p-input-icon-left w-full">
            <i class="pi pi-user"></i>
            <input
              id="username"
              type="text"
              pInputText
              formControlName="username"
              class="w-full"
            />
          </span>
          @if (getFormControl(userForm, 'username')?.touched &&
          getFormControl(userForm, 'username')?.invalid) {
          <small class="p-error">Username is required</small>
          }
        </div>
        <div class="field">
          <label for="email" class="block font-bold mb-2">Email</label>
          <span class="p-input-icon-left w-full">
            <i class="pi pi-envelope"></i>
            <input
              id="email"
              type="email"
              pInputText
              formControlName="email"
              class="w-full"
            />
          </span>
          @if (getFormControl(userForm, 'email')?.touched &&
          getFormControl(userForm, 'email')?.invalid) {
          <small class="p-error">Valid email is required</small>
          }
        </div>
        <div class="flex-grow-1"></div>
        <div class="flex justify-content-end mt-3">
          <p-button
            label="Save Account Info"
            icon="pi pi-check"
            (onClick)="onSubmitUserForm()"
            [disabled]="userForm.invalid"
          ></p-button>
        </div>
      </form>
    </p-card>
  </div>

  <!-- Teacher Information Card -->
  <div class="col-12 lg:col-6 flex-auto flex-column teacher-info-container">
    <p-card header="Teacher Information" styleClass="h-full flex-fill shadow-3">
      <form [formGroup]="teacherForm" class="flex flex-column gap-3">
        <div class="grid">
          <div class="col-12 md:col-4">
            <label for="firstName" class="block font-bold mb-2"
              >First Name</label
            >
            <input
              id="firstName"
              type="text"
              pInputText
              formControlName="firstName"
              class="w-full"
            />
            @if (getFormControl(teacherForm, 'firstName')?.touched &&
            getFormControl(teacherForm, 'firstName')?.invalid) {
            <small class="p-error">First name is required</small>
            }
          </div>
          <div class="col-12 md:col-4">
            <label for="lastName" class="block font-bold mb-2">Last Name</label>
            <input
              id="lastName"
              type="text"
              pInputText
              formControlName="lastName"
              class="w-full"
            />
            @if (getFormControl(teacherForm, 'lastName')?.touched &&
            getFormControl(teacherForm, 'lastName')?.invalid) {
            <small class="p-error">Last name is required</small>
            }
          </div>
          <div class="col-12 md:col-4">
            <label for="middleInitial" class="block font-bold mb-2"
              >Middle Initial</label
            >
            <input
              id="middleInitial"
              type="text"
              pInputText
              formControlName="middleInitial"
              class="w-full"
              maxlength="1"
            />
          </div>
        </div>

        <div class="grid">
          <div class="col-12 md:col-4">
            <div class="field">
              <label for="age" class="block font-bold mb-2">Age</label>
              <input
                id="age"
                type="text"
                pInputText
                formControlName="age"
                class="w-full"
              />
              @if (getFormControl(teacherForm, 'age')?.touched &&
              getFormControl(teacherForm, 'age')?.invalid) {
              <small class="p-error">Age is required</small>
              }
            </div>
          </div>
          <div class="col-12 md:col-4">
            <label for="sex" class="block font-bold mb-2">Sex</label>
            <p-dropdown
              id="sex"
              [options]="sexOptions"
              formControlName="sex"
              placeholder="Select Sex"
              styleClass="w-full"
            ></p-dropdown>
            @if (getFormControl(teacherForm, 'sex')?.touched &&
            getFormControl(teacherForm, 'sex')?.invalid) {
            <small class="p-error">Sex is required</small>
            }
          </div>
          <div class="col-12 md:col-4">
            <label for="position" class="block font-bold mb-2">Position</label>
            <p-dropdown
              id="position"
              [options]="positionOptions"
              formControlName="position"
              placeholder="Select Position"
              styleClass="w-full"
            ></p-dropdown>
            @if (getFormControl(teacherForm, 'position')?.touched &&
            getFormControl(teacherForm, 'position')?.invalid) {
            <small class="p-error">Position is required</small>
            }
          </div>
        </div>

        <div class="grid">
          <div class="col-12 md:col-6">
            <label for="contactNumber" class="block font-bold mb-2"
              >Contact Number</label
            >
            <p-inputMask
              id="contactNumber"
              formControlName="contactNumber"
              mask="(999) 999-9999"
              placeholder="(999) 999-9999"
              styleClass="w-full"
            ></p-inputMask>
            @if (getFormControl(teacherForm, 'contactNumber')?.touched &&
            getFormControl(teacherForm, 'contactNumber')?.invalid) {
            <small class="p-error">Valid contact number is required</small>
            }
          </div>
          <div class="col-12 md:col-6">
            <label for="emergencyContact" class="block font-bold mb-2"
              >Emergency Contact</label
            >
            <p-inputMask
              id="emergencyContact"
              formControlName="emergencyContact"
              mask="(999) 999-9999"
              placeholder="(999) 999-9999"
              styleClass="w-full"
            ></p-inputMask>
            @if (getFormControl(teacherForm, 'emergencyContact')?.touched &&
            getFormControl(teacherForm, 'emergencyContact')?.invalid) {
            <small class="p-error">Emergency contact is required</small>
            }
          </div>
        </div>
        <div class="flex justify-content-center mt-auto">
          <p-button
            label="Save Teacher Info"
            icon="pi pi-check"
            (onClick)="onSubmitTeacherForm()"
            [disabled]="teacherForm.invalid"
          ></p-button>
        </div>
      </form>
    </p-card>
  </div>
</div>
