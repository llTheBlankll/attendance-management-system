<p-toast/>
<p-dialog [(visible)]="this.isVisible" [closable]="false" [style]="{'height': '50rem'}" header="Create Class"
          modal styleClass="w-30rem">
  <form>
    <div class="grid w-full ml-1">
      <form [formGroup]="this.classFormGroup" action="" class="w-full">
        <div class="col-12 w-full">
          <div class="flex flex-column gap-2 mb-2">
            <label for="room">Room</label>
            <input
              class="w-full"
              formControlName="room"
              id="room"
              pInputText
              placeholder="Enter Class Room"
            />
          </div>
        </div>
        <div class="col-12">
          <div class="flex flex-column gap-2 mb-2">
            <label for="className">Class Name</label>
            <input
              formControlName="className"
              id="className"
              pInputText
              placeholder="Enter Class Name"
            />
          </div>
        </div>
        <div class="col-12">
          <div class="flex flex-column gap-2 mb-2">
            <label for="description">Description</label>
            <input
              formControlName="description"
              id="description"
              pInputText
              placeholder="Description (optional)"
            />
          </div>
        </div>
        <div class="col-12">
          <div class="flex flex-column gap-2 mb-2">
            <label for="schoolYear">School Year</label>
            <input
              formControlName="schoolYear"
              id="schoolYear"
              pInputText
              placeholder="School Year"
            />
          </div>
        </div>
        <div class="col-12">
          <div class="flex flex-column gap-2 mb-2">
            <label for="teacher">Teacher</label>
            <p-dropdown
              [filterFields]="['firstName', 'lastName']"
              [filter]="true"
              [options]="this.teachers"
              filterPlaceholder="Search by last name"
              formControlName="teacher"
              id="teacher"
              placeholder="Classroom Adviser"
              required
              styleClass="w-full"
            >
              <ng-template let-teacher pTemplate="item">
                {{ teacher.firstName }}&nbsp;{{ teacher.lastName }} - {{ teacher.position }}
              </ng-template>
              <ng-template let-selectedOption pTemplate="selectedItem">
                {{ selectedOption.firstName }}&nbsp;{{ selectedOption.lastName }} - {{ selectedOption.position }}
              </ng-template>
            </p-dropdown>
          </div>
        </div>
        <div class="col-12">
          <div class="flex flex-column gap-2 mb-2">
            <label for="gradeLevel">Grade Level</label>
            <p-dropdown
              [options]="this.gradeLevels"
              formControlName="gradeLevel"
              id="gradeLevel"
              placeholder="Classroom Grade Level"
              required
              styleClass="w-full">
              <ng-template let-gradeLevel pTemplate="item">
                {{ gradeLevel.name }}
              </ng-template>
              <ng-template let-selectedOption pTemplate="selectedItem">
                {{ selectedOption.name }}
              </ng-template>
            </p-dropdown>
          </div>
        </div>
      </form>
      <div class="col-12">
        <div class="flex flex-column gap-2 mb-2">
          <label for="profilePicture">Classroom Logo / Picture:</label>
          <div class="flex flex-row align-items-center">
            <p-fileUpload
              #classLogoUpload
              (click)="classLogoUpload._files.length >= 1 ? classLogoUpload.clear() : ''"
              (onSelect)="this.onLogoSelect($event)"
              [accept]="'image/*'"
              [maxFileSize]="8000000"
              [multiple]="false"
              chooseIcon="pi pi-pencil"
              chooseLabel="Choose"
              class="w-full mr-2"
              id="profilePicture"
              mode="basic"
              name="profilePicture"
              pTooltip="Profile Picture"
              styleClass="w-full"/>
          </div>
        </div>
      </div>
      <div class="col-12 flex justify-content-center">
        <div class="flex justify-content-end gap-2">
          <p-button (onClick)="this.isVisible = false" label="Cancel" severity="danger"/>
          <p-button (onClick)="this.createClass()" label="Save" severity="success"/>
        </div>
      </div>
    </div>
  </form>
</p-dialog>
